(()=>{function e(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,n)}return o}function t(t){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?e(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):e(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(e,t,o){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var o=t.call(e,"string");if("object"!=typeof o)return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}document.addEventListener("DOMContentLoaded",(function(){console.log("ðŸŽ¤ Popup loaded");const e=document.getElementById("groqProvider"),o=document.getElementById("openaiProvider"),n=document.getElementById("groqRadio"),r=document.getElementById("openaiRadio"),i=document.getElementById("groqApiKey"),s=document.getElementById("openaiApiKey"),a=document.getElementById("saveSettings"),c=document.getElementById("status"),l=document.getElementById("connectionStatus"),d=document.getElementById("groqStatus"),g=document.getElementById("openaiStatus");function u(t){console.log("ðŸŽ¤ Selected provider:",t),n.checked="groq"===t,r.checked="openai"===t,e.classList.toggle("selected","groq"===t),o.classList.toggle("selected","openai"===t),chrome.storage.local.set({selectedProvider:t}),y()}function p(e,t){const o="groq"===e?d:g;if(!t)return o.textContent="",!1;const n="groq"===e?t.startsWith("gsk_"):t.startsWith("sk-"),r=t.length>20;return n?r?(o.textContent="âœ…",o.title="Valid format",!0):(o.textContent="âš ï¸",o.title="Key seems too short",!1):(o.textContent="âŒ",o.title="".concat("groq"===e?"Groq":"OpenAI",' keys should start with "').concat("groq"===e?"gsk_":"sk_",'"'),!1)}function y(){const e=n.checked?"groq":"openai",t="groq"===e?i.value:s.value;t&&p(e,t)?(l.className="status-indicator connected",l.title="Ready to transcribe"):(l.className="status-indicator disconnected",l.title="API key required")}async function m(){console.log("ðŸŽ¤ Saving settings...");const e=n.checked?"groq":"openai",t=i.value.trim(),o=s.value.trim();if("groq"===e&&!t)return v("Please enter your Groq API key","error"),void i.focus();if("openai"===e&&!o)return v("Please enter your OpenAI API key","error"),void s.focus();if(p(e,"groq"===e?t:o)){a.disabled=!0,a.className="save-button loading",v("Saving settings...","info");try{await chrome.storage.local.set({selectedProvider:e,groqApiKey:t,openaiApiKey:o}),console.log("ðŸŽ¤ Settings saved successfully"),a.textContent="âœ… Saved! Ready to Use",a.className="save-button",y(),v("ðŸŽ‰ Setup complete! Go to Gmail and click compose to start transcribing.","success"),setTimeout((()=>{window.close()}),2e3)}catch(e){console.error("ðŸŽ¤ Error saving settings:",e),v("Error saving settings: "+e.message,"error")}finally{a.disabled=!1,a.className.includes("loading")&&(a.className="save-button",a.textContent="Save & Activate")}}else v("Invalid ".concat("groq"===e?"Groq":"OpenAI"," API key format"),"error"),("groq"===e?i:s).focus()}function v(e,t){c.textContent=e,c.className="status ".concat(t),c.style.display="block","error"===t&&setTimeout((()=>{c.style.display="none"}),5e3)}!async function(){try{const e=await chrome.storage.local.get(["groqApiKey","openaiApiKey","selectedProvider"]);console.log("ðŸŽ¤ Loaded settings:",t(t({},e),{},{groqApiKey:e.groqApiKey?"[HIDDEN]":"none",openaiApiKey:e.openaiApiKey?"[HIDDEN]":"none"})),e.groqApiKey&&(i.value=e.groqApiKey,p("groq",e.groqApiKey)),e.openaiApiKey&&(s.value=e.openaiApiKey,p("openai",e.openaiApiKey)),u(e.selectedProvider||"groq");const o=n.checked?"groq":"openai",r="groq"===o?e.groqApiKey:e.openaiApiKey;r&&p(o,r)&&(v("âœ… Ready to transcribe! Go to Gmail and click compose.","success"),a.textContent="âœ… Ready to Use")}catch(e){console.error("ðŸŽ¤ Error loading settings:",e),v("Error loading settings","error")}}(),e.addEventListener("click",(()=>u("groq"))),o.addEventListener("click",(()=>u("openai"))),n.addEventListener("change",(()=>u("groq"))),r.addEventListener("change",(()=>u("openai"))),i.addEventListener("input",(()=>p("groq",i.value))),s.addEventListener("input",(()=>p("openai",s.value))),a.addEventListener("click",m),[i,s].forEach((e=>{e.addEventListener("keypress",(e=>{"Enter"===e.key&&m()}))})),setInterval(y,1e3)}))})();
//# sourceMappingURL=popup.js.map